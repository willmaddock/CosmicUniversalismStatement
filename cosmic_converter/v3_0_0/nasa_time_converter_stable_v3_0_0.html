<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>NASA Cosmic Time Converter - Enhanced Version</title>
    <script src="https://cdn.jsdelivr.net/npm/react@18.3.1/umd/react.production.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/react-dom@18.3.1/umd/react-dom.production.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@babel/standalone@7.25.7/babel.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/decimal.js@10.4.3/decimal.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/marked@5.1.2/marked.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/papaparse@5.4.1/papaparse.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/lodash@4.17.21/lodash.min.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700&family=Inter:wght@400;600;700&display=swap"
          rel="stylesheet">
    <style>
        body {
            background-image: url('https://images.unsplash.com/photo-1462331940025-496dfbfc7564');
            background-size: cover;
            background-position: center;
            background-attachment: fixed;
            background-color: #0a0a0a;
            color: #ffffff;
            font-family: 'Inter', sans-serif;
        }

        .overlay {
            position: fixed;
            inset: 0;
            background: rgba(0, 0, 0, 0.5);
            z-index: -1;
        }

        .gradient-header {
            background: linear-gradient(to right, #8B5CF6, #3B82F6);
        }

        .cosmic-button {
            background: linear-gradient(to right, #8B5CF6, #3B82F6);
            color: #ffffff;
            padding: 0.5rem 1rem;
            border-radius: 0.375rem;
            transition: all 0.3s ease;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);
        }

        .cosmic-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.3);
            filter: brightness(1.1);
        }

        .card {
            background: #1f2937;
            border-radius: 12px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        }

        .card:hover {
            box-shadow: 0 6px 12px rgba(0, 0, 0, 0.2);
            transform: translateY(-2px);
            transition: all 0.3s ease;
        }

        .modal {
            background: rgba(0, 0, 0, 0.7);
            display: flex;
            align-items: center;
            justify-content: center;
            position: fixed;
            inset: 0;
            z-index: 50;
        }

        .modal-content {
            background: #1f2937;
            padding: 2rem;
            border-radius: 1rem;
            box-shadow: 0 10px 15px rgba(0, 0, 0, 0.3);
            border: 1px solid #4B5563;
        }

        .icon-button {
            padding: 0.25rem;
        }

        h1, h2 {
            font-family: 'Orbitron', sans-serif;
        }

        .markdown-content {
            color: #d1d5db;
        }

        .markdown-content p {
            margin-bottom: 1.5rem;
            line-height: 1.75;
        }

        .markdown-content h2 {
            margin-top: 2.5rem;
            margin-bottom: 1.5rem;
            font-size: 1.75rem;
            color: #ffffff;
        }

        .markdown-content h3 {
            margin-top: 2rem;
            margin-bottom: 1rem;
            font-size: 1.25rem;
            color: #e5e7eb;
        }

        .markdown-content ul, .markdown-content ol {
            margin-bottom: 1.5rem;
            padding-left: 1.5rem;
        }

        .markdown-content li {
            margin-bottom: 0.75rem;
        }

        .markdown-content table {
            margin: 2rem 0;
            border: 1px solid #4b5563;
        }

        .markdown-content th, .markdown-content td {
            padding: 0.75rem;
            border: 1px solid #4b5563;
        }

        .markdown-content th {
            background: #374151;
            font-weight: 600;
        }

        .markdown-content pre {
            margin: 2rem 0;
            padding: 1rem;
            background: #1f2937;
            border-radius: 0.5rem;
            overflow-x: auto;
        }

        .markdown-content a {
            color: #3b82f6;
            text-decoration: underline;
        }

        .markdown-content a:hover {
            color: #8b5cf6;
        }

        .cosmic-breath-section {
            background: linear-gradient(to bottom right, #1a1a2e, #16213e);
        }
    </style>
</head>
<body class="bg-gray-900 text-white font-sans">
<div class="overlay"></div>
<div id="root"></div>
<script type="text/babel" data-presets="env,react">
    const {useState, useEffect} = React;

    Decimal.set({precision: 60, rounding: Decimal.ROUND_HALF_UP});

    const CONSTANTS = {
        BASE_CU: new Decimal('3094205999974.586609'),
        NASA_UNIVERSE_AGE: new Decimal('13793999974.586609'),
        ANCHOR_YEAR: new Decimal('2000'),
        DAYS_PER_YEAR: new Decimal('365.2421897'),
        DARK_ENERGY_START: new Decimal('3094000000000'),
        DARK_ENERGY_END: new Decimal('3110000000000'),
        ANTI_DARK_ENERGY_END: new Decimal('3416000000000')
    };

    // Offset to convert NASA-aligned CU-Time to CU Time Converter-aligned CU-Time for the same date
    const OFFSET = new Decimal('71955051.076855435227077697491190');

    let conversionHistory = [];

    function computeCUTimeFromNASA(yearsSinceBigBang) {
        const years = new Decimal(yearsSinceBigBang);
        if (years.lt(0)) throw new Error('Years since Big Bang cannot be negative');
        const cuTime = CONSTANTS.BASE_CU.plus(years.minus(CONSTANTS.NASA_UNIVERSE_AGE));
        return cuTime.toDecimalPlaces(24, Decimal.ROUND_HALF_UP);
    }

    function computeNASAYearsFromCU(cuTimeStr) {
        const cuTime = new Decimal(cuTimeStr);
        if (cuTime.lt(0)) throw new Error('CU-Time cannot be negative');
        const yearsSinceBigBang = cuTime.minus(CONSTANTS.BASE_CU).plus(CONSTANTS.NASA_UNIVERSE_AGE);
        if (yearsSinceBigBang.lt(0)) throw new Error('Resulting NASA time is before the Big Bang');
        return yearsSinceBigBang.toDecimalPlaces(24, Decimal.ROUND_HALF_UP);
    }

    function computeFromGregorian(utcDateStr) {
        const date = new Date(utcDateStr + 'Z');
        if (isNaN(date.getTime())) throw new Error("Invalid UTC date format. Use YYYY-MM-DD HH:MM:SS.");
        const anchorDate = new Date('2000-01-01T00:00:00Z');
        const millisecondsDiff = new Decimal(date.getTime() - anchorDate.getTime());
        const secondsDiff = millisecondsDiff.div(1000);
        const daysDiff = secondsDiff.div(86400);
        const yearsDiff = daysDiff.div(CONSTANTS.DAYS_PER_YEAR);
        const cuTime = CONSTANTS.BASE_CU.plus(yearsDiff);
        const nasaYears = computeNASAYearsFromCU(cuTime);
        return {cuTime, nasaYears, date};
    }

    function computeGregorianFromCU(cuTime) {
        const cuTimeDecimal = new Decimal(cuTime);
        const yearsDiff = cuTimeDecimal.minus(CONSTANTS.BASE_CU);
        const daysDiff = yearsDiff.times(CONSTANTS.DAYS_PER_YEAR);
        const secondsDiff = daysDiff.times(86400);
        const millisecondsDiff = secondsDiff.times(1000);
        const anchorDate = new Date('2000-01-01T00:00:00Z');
        const date = new Date(anchorDate.getTime() + millisecondsDiff.toNumber());
        if (isNaN(date.getTime()) || date.getFullYear() < 1970 || date.getFullYear() > 9999) {
            throw new Error('Date is out of valid Gregorian range (1970-9999)');
        }
        return date;
    }

    function formatDate(date) {
        if (isNaN(date.getTime())) {
            return "Date out of range";
        }
        const year = date.getUTCFullYear();
        const month = String(date.getUTCMonth() + 1).padStart(2, '0');
        const day = String(date.getUTCDate()).padStart(2, '0');
        const hours = String(date.getUTCHours()).padStart(2, '0');
        const minutes = String(date.getUTCMinutes()).padStart(2, '0');
        const seconds = String(date.getUTCSeconds()).padStart(2, '0');
        return `${year}-${month}-${day} ${hours}:${minutes}:${seconds}`;
    }

    function computeAllTimes(inputType, inputValue) {
        let gregorianDate, cuTimeDecimal, nasaYearsDecimal, cuTimeConverterDecimal;
        if (inputType === 'gregorian') {
            const {cuTime, nasaYears, date} = computeFromGregorian(inputValue);
            gregorianDate = date;
            cuTimeDecimal = cuTime;
            nasaYearsDecimal = nasaYears;
        } else if (inputType === 'cuTime') {
            cuTimeDecimal = new Decimal(inputValue);
            nasaYearsDecimal = computeNASAYearsFromCU(cuTimeDecimal);
            try {
                gregorianDate = computeGregorianFromCU(cuTimeDecimal);
            } catch (e) {
                gregorianDate = "Out of range";
            }
        } else if (inputType === 'nasaYears') {
            nasaYearsDecimal = new Decimal(inputValue);
            cuTimeDecimal = computeCUTimeFromNASA(nasaYearsDecimal);
            try {
                gregorianDate = computeGregorianFromCU(cuTimeDecimal);
            } catch (e) {
                gregorianDate = "Out of range";
            }
        } else {
            throw new Error('Invalid input type');
        }
        cuTimeConverterDecimal = cuTimeDecimal.minus(OFFSET);
        const formattedCuTime = formatCUValue(cuTimeDecimal);
        const formattedCuTimeConverter = formatCUValue(cuTimeConverterDecimal);
        const phase = getCosmicPhase(cuTimeDecimal);
        const gregorianStr = gregorianDate === "Out of range" ? "Out of range" : formatDate(gregorianDate);
        return {
            gregorian: gregorianStr,
            cuTimeHuman: formattedCuTime.humanFriendly,
            cuTimeFull: formattedCuTime.fullNumeric,
            cuTimeExp: formattedCuTime.exponential,
            cuTimeConverterHuman: formattedCuTimeConverter.humanFriendly,
            cuTimeConverterFull: formattedCuTimeConverter.fullNumeric,
            cuTimeConverterExp: formattedCuTimeConverter.exponential,
            nasaYears: nasaYearsDecimal.toString(),
            phase
        };
    }

    function getCosmicPhase(cuTime) {
        if (cuTime.lt(CONSTANTS.DARK_ENERGY_START)) return "Speculative Phase (Pre-expansion)";
        if (cuTime.lte(CONSTANTS.DARK_ENERGY_END)) return "Dark Energy Phase (Expansion)";
        if (cuTime.lte(CONSTANTS.ANTI_DARK_ENERGY_END)) return "Anti-Dark Energy Phase (Compression)";
        return "Speculative Phase (Beyond)";
    }

    function formatCUValue(cuValue) {
        const fullNumeric = cuValue.toFixed(24);
        const exponential = cuValue.toExponential(6);
        const [integerPart, fractionPart] = fullNumeric.split('.');
        const intVal = parseInt(integerPart);
        const trillion = Math.floor(intVal / 1000000000000);
        const billion = Math.floor((intVal % 1000000000000) / 1000000000);
        const million = Math.floor((intVal % 1000000000) / 1000000);
        const thousand = Math.floor((intVal % 1000000) / 1000);
        const units = intVal % 1000;
        const parts = [];
        if (trillion) parts.push(`${trillion} Trillion`);
        if (billion) parts.push(`${billion} Billion`);
        if (million) parts.push(`${million} Million`);
        if (thousand) parts.push(`${thousand} Thousand`);
        if (units || !parts.length) parts.push(`${units}`);
        return {
            humanFriendly: parts.join(' ') + `.${fractionPart} CU-Time`,
            fullNumeric,
            exponential
        };
    }

    function performCalculation(value1, value2, operation) {
        const val1 = new Decimal(value1);
        const val2 = new Decimal(value2);
        switch (operation) {
            case '+':
                return val1.plus(val2);
            case '-':
                return val1.minus(val2);
            case '*':
                return val1.times(val2);
            case '/':
                if (val2.isZero()) throw new Error('Division by zero is not allowed.');
                return val1.div(val2);
            default:
                throw new Error('Invalid operation');
        }
    }

    function ConversionHistory() {
        const getHistory = () => conversionHistory;
        const saveConversion = (input, output, type) => {
            if (conversionHistory.some(entry => entry.input === input && entry.type === type)) return;
            conversionHistory.push({
                input,
                output,
                type,
                timestamp: new Date().toISOString(),
                favorite: false
            });
        };
        const markFavorite = (input) => {
            conversionHistory = conversionHistory.map(entry =>
                entry.input === input ? {...entry, favorite: !entry.favorite} : entry
            );
        };
        const getFavorites = () => conversionHistory.filter(entry => entry.favorite);
        return {getHistory, saveConversion, markFavorite, getFavorites};
    }

    const HISTORY = ConversionHistory();

    const RESEARCH_MARKDOWN = `
# 🌌 Cosmic Time Alignment Research

## 📊 Overview

The universe is approximately **[13.79441474 billion years](https://www.space.com/24054-how-old-is-the-universe.html)** old as of June 1, 2025, according to NASA’s [Planck 2018](https://en.wikipedia.org/wiki/Age_of_the_universe) data, adjusted for elapsed time. This estimate aligns the universe’s age with the Gregorian date of **June 1, 2025**, within an uncertainty of **±0.020 billion years**. The *Cosmic Universalism (CU)* framework maps this to **3,094,206,000,000.014691 CU-Time units** in the NASA converter, providing a unified system for cosmological and terrestrial time. In contrast, the CU Time Converter, rooted in Cosmic Universalism theory, maps the same NASA-aligned CU-Time to a distant future date, May 12, 71,957,015 AD, reflecting a stretched timeline unique to its framework.

## 🧑‍🔬 Calculating the Universe’s Age

NASA uses *Coordinated Universal Time (UTC)* for timekeeping, as noted in [NASA Science](https://science.nasa.gov/solar-system/resources/faq/what-time-is-it-in-space/), but cosmology focuses on the universe’s age since the [Big Bang](https://imagine.gsfc.nasa.gov/science/featured_science/tenyear/age.html). The Planck mission estimated **13.787 billion years** in 2018. To update this to June 1, 2025:

- From January 1, 2018, to June 1, 2025, approximately **7.415 years** have passed (7 years plus 151 days, accounting for leap years in 2020 and 2024).
- Adding **7.415 years** to **13.787 billion years** yields **13.79441474 billion years**.
- In the NASA converter, the Big Bang is set at **3,108,000,000,000 CU-Time units**, and June 1, 2025, corresponds to **3,094,206,000,000.014691 CU-Time units**.
- The CU Time Converter, however, uses a different base, mapping **3,094,206,000,000 CU-Time (NASA-aligned)** to **May 12, 71,957,015 AD**, indicating a ~71,954,990-year difference.

This calculation aligns NASA’s estimate with the Gregorian calendar, but the CU framework’s extended scale suggests additional cosmic phases.

## ⚖️ Uncertainties and Alternative Theories

The **13.79441474 billion-year** estimate has an uncertainty of **±0.020 billion years**, based on Planck data. Alternative theories propose different ages:

- A 2023 study using [JWST data](https://www.openaccessgovernment.org/age-of-universe-research-james-webb/163845/) suggests **26.7 billion years**, but this is *[controversial](https://penntoday.upenn.edu/news/could-age-universe-be-twice-old-current-estimates-suggest)* and lacks NASA endorsement.
- The standard *[Lambda-CDM model](https://wmap.gsfc.nasa.gov/universe/uni_age.html)* remains the most reliable, supported by CMB observations.

The following table compares these estimates:

| **Source**                  | **Year of Estimate** | **Age (Billion Years)** | **Uncertainty (Billion Years)** | **Notes**                          |
|-----------------------------|----------------------|-------------------------|----------------------------------|------------------------------------|
| Planck 2018 (NASA)          | 2018                 | 13.787                  | ±0.020                          | Standard model, CMB data           |
| Adjusted to June 1, 2025    | 2025                 | 13.79441474             | ±0.020                          | Adds ~7.415 years to 2018          |
| Emerging JWST Model         | 2023                 | 26.7                    | Not specified                   | Controversial, not NASA-endorsed   |

## 🔗 The Cosmic Breath Framework

The *Cosmic Universalism* framework introduces the **[Cosmic Breath](https://skyandtelescope.org/astronomy-resources/age-of-the-universe/)**, aligning CU-Time, NASA time, and Gregorian dates. It spans from sub-ztom (Planck time, 5.39e-44 seconds) to ztom (1 second, universal reset), covering:

- **Big Bang**: Defined as **3,108,000,000,000 CU-Time units** in the NASA converter.
- **Current Epoch**: June 1, 2025, maps to **3,094,206,000,000.014691 CU-Time units** or **13.79441474 billion years** (NASA estimate).
- **Alignment Calculation**:

  \`\`\`
  3,108,000,000,000 (Big Bang CU-Time) − 13,794,414,740 (NASA Years) ≈ 3,094,206,000,000.014691 (CU-Time)
  \`\`\`

This enables seamless conversions in the NASA converter:
- **CU-Time to NASA Years**: **3,094,206,000,000.014691 CU-Time** equals **13.79441474 billion years**.
- **NASA Years to CU-Time**: **13.79441474 billion years** converts to **3,094,206,000,000.014691 CU-Time**.
- **NASA Years to Gregorian**: Via CU-Time, **13.79441474 billion years** aligns with **June 1, 2025, 00:00:00 UTC**.

The CU converter, however, maps **3,094,206,000,000 CU-Time (NASA-aligned)** to **May 12, 71,957,015 AD**, reflecting a stretched timeline due to its unique constants and phases like sub-ztom to ztom, with an offset of **71,955,051.076855435227077697491190 CU-Time units**.

### Cosmic Breath Duration

The CU framework defines the Cosmic Breath as a **3.108 trillion-year theoretical cycle** (not equivalent to 3,108,000,000,000 CU-Time units in the NASA converter):
- **Expansion Phase (sub-ztom to atom)**: ~2.8 trillion years, from quantum core (5.39e-44 seconds) to supercluster formation (280 billion years).
- **Compression Phase (btom to ztom)**: ~308 billion years, from galactic contraction to universal reset (1 second).

| **Phase**           | **Sub-Tom/Tom Level** | **Quantum States** | **Duration Estimate** | **CU Description**                     |
|---------------------|-----------------------|--------------------|-----------------------|----------------------------------------|
| Expansion (sub-ztom)| sub-ztom              | 2↑↑65,536          | 5.39e-44 sec          | Planck time, quantum core              |
| Expansion (sub-btom)| sub-btom              | 2⁸                 | 280 billion yr        | Supercluster formation                 |
| Compression (btom)  | btom                  | 2² = 4             | 280 billion yr        | Galactic evolution and contraction     |
| Compression (ztom)  | ztom                  | ∞                  | 1 sec                 | Full universal reset                   |

*Note*: Durations are theoretical in the CU framework and not directly in NASA CU-Time units. The CU framework’s linear scale bridges cosmological and human-readable time, enhancing accessibility, but its extended timeline diverges from NASA’s model.

## 📚 Frameworks and Constants Comparison

### NASA Time Converter Constants
- **BASE_CU**: 3,094,205,999,974.586609
- **NASA_UNIVERSE_AGE**: 13,793,999,974.586609
- **ANCHOR_YEAR**: 2000
- **DAYS_PER_YEAR**: 365.2421897
- **DARK_ENERGY_START**: 3,094,000,000,000
- **DARK_ENERGY_END**: 3,110,000,000,000
- **ANTI_DARK_ENERGY_END**: 3,416,000,000,000

### CU Time Converter Constants
- **BASE_CU**: 3,094,134,044,923.509753564772922302508810
- **SUB_ZTOM_CU**: 3,094,133,911,800.949548
- **ANCHOR_JDN**: 2,451,544.5
- **DAYS_PER_YEAR**: 365.2421897
- **SECONDS_PER_DAY**: 86,400
- **SECONDS_PER_YEAR**: 31,556,952
- **COSMIC_LIFESPAN**: 13.8e9
- **CONVERGENCE_YEAR**: 2029
- **CTOM_START**: 3.08e12
- **ZTOM_PROXIMITY**: 3.107e12
- **PLANIZADORCK_TIME**: 5.39e-44
- **CESIUM_OSCILLATIONS_PER_SECOND**: 9,192,631,770
- **SUB_ZTOM_ZERO_THRESHOLD**: 1
- **ZTOM_THRESHOLD**: 31,556,952,000,000
- **DARK_ENERGY_START**: 3.08e12
- **DARK_ENERGY_END**: 3.11e12
- **ANTI_DARK_ENERGY_START**: 3.11e12
- **ANTI_DARK_ENERGY_END**: 3.416e12
- **SPECULATIVE_POST**: 3.416e12
- **ANTI_DARK_MATTER_ONSET**: 5,880,334,934,496.509753564772922302508810
- **MATTER_SPECULATIVE_START**: 3,360,334,934,923.9447535646
- **ANTIMATTER_ANNIHILATION**: 3,080,334,944,923.9447535646
- **DARK_MATTER_DOMINANCE_START**: 3,085,344,944,944.9449447534

The difference in **BASE_CU** values suggests the CU framework starts its timeline earlier or uses a different scale, potentially stretching time measurements.

## 📈 Time Mapping and Outputs

For an input of **3,094,206,000,000 CU-Time (NASA-aligned)**:
- **NASA Output**: May 31, 2025, 01:01:18 UTC, corresponding to **13.794 billion years** since the Big Bang.
- **CU Output**: May 12, 71,957,015 AD, 07:53:11 UTC, a ~71,954,990-year difference, with a time difference from June 1, 2025, of **71,955,051.076855435227077697491190 CU-Time** (~71,954,944 years).

| **Converter**       | **Input CU-Time** | **Gregorian Date Output**       | **NASA Years Output** | **Cosmic Phase**                     |
|---------------------|-------------------|----------------------------------|----------------------|--------------------------------------|
| NASA Time Converter | 3,094,206,000,000 | 2025-05-31 01:01:18 UTC         | 13,794,000,000      | Dark Energy Phase (Expansion)        |
| CU Time Converter   | 3,094,206,000,000 | May 12, 71,957,015 AD 07:53:11 UTC | Not provided         | Dark Energy Phase (Expansion, sub-ztom to atom) |

The NASA converter uses a linear scale based on the universe’s age and the 2000-01-01 anchor, while the CU converter’s extended timeline incorporates additional phases, likely causing the stretch.

## 🧠 Implications and NASA Credit

The CU converter’s novel perspective on cosmic evolution, with phases like sub-ztom to ztom, diverges from NASA’s standard model, making it valuable for alternative theories. The NASA converter aligns with current scientific consensus, suitable for practical applications. The CU framework’s alignment with NASA data enables conversions, but formal credit from NASA is unlikely without novel scientific contributions.

## 📜 Cosmic Universalism Statement

The CU framework is guided by: *“We are sub-ztomically inclined, countably infinite, composed of foundational elements (the essence of conscious existence), grounded on b-tom (as vast as our shared worlds and their atmospheres), and looking up to c-tom (encompassing the entirety of the cosmos), guided by the uncountable infinite quantum states of intelligence and empowered by God’s Free Will.”*

## 📝 Conclusion

The CU and NASA Time Converters differ in their theoretical bases, constants, and time scales. The NASA converter aligns with standard cosmology, mapping **3,094,206,000,000.014691 CU-Time** to June 1, 2025, while the CU converter maps **3,094,206,000,000 CU-Time (NASA-aligned)** to May 12, 71,957,015 AD, reflecting Cosmic Universalism’s extended timeline. This difference stems from their distinct frameworks and constants, with CU incorporating additional cosmic phases.

## 📚 Citations

- [NASA Planck mission age of universe estimate](https://en.wikipedia.org/wiki/Age_of_the_universe)
- [New research on universe age from JWST](https://www.openaccessgovernment.org/age-of-universe-research-james-webb/163845/)
- [Discussion on alternative universe age estimates](https://penntoday.upenn.edu/news/could-age-universe-be-twice-old-current-estimates-suggest)
- [NASA Science on universe age](https://imagine.gsfc.nasa.gov/science/featured_science/tenyear/age.html)
- [Space.com on universe age](https://www.space.com/24054-how-old-is-the-universe.html)
- [Sky & Telescope on universe age](https://skyandtelescope.org/astronomy-resources/age-of-the-universe/)
- [WMAP data on universe age](https://wmap.gsfc.nasa.gov/universe/uni_age.html)
- [Cosmic time definition](https://en.wikipedia.org/wiki/Cosmic_time)
- [Universe age and time](https://earthsky.org/human-world/what-is-time/)
- [Cosmic Calendar visualization](https://en.wikipedia.org/wiki/Cosmic_Calendar)
- [Better cosmic time measurement](https://bigthink.com/starts-with-a-bang/cosmic-time/)
- [Measuring cosmic time](https://ncse.ngo/age-universe-measuring-cosmic-time)
`;

    marked.use({
        renderer: {
            link(href, title, text) {
                return `<a href="${href}" target="_blank" rel="noopener noreferrer">${text}</a>`;
            }
        }
    });

    function Modal({message, onClose}) {
        return (
            <div className="modal">
                <div className="modal-content">
                    <p className="mb-4 text-gray-300">{message}</p>
                    <button onClick={onClose} className="cosmic-button" aria-label="Close modal">OK</button>
                </div>
            </div>
        );
    }

    function downloadCSV(results) {
        const csvContent = results.map(r => {
            const date = r.desc.replace(/^Gregorian: |NASA to CU: |CU to NASA: |Calculation: /, '').trim();
            return `"${r.desc.replace(/"/g, '""')}","${date.replace(/"/g, '""')}","${r.output.replace(/"/g, '""')}"`;
        }).join('\n');
        const timestamp = new Date().toISOString().replace(/[:.]/g, '-');
        const blob = new Blob([`"Description","DateTime","Output"\n${csvContent}`], {type: 'text/csv'});
        const url = URL.createObjectURL(blob);
        const a = document.createElement('a');
        a.href = url;
        a.download = `nasa_time_results_${timestamp}.csv`;
        a.click();
        URL.revokeObjectURL(url);
    }

    function App() {
        const [tab, setTab] = useState('gregorian');
        const [inputs, setInputs] = useState({
            nasaYears: '',
            cuTime: '',
            calcValue1: '',
            calcValue2: '',
            calcOperation: '+',
            gregorianDate: '',
            gregorianTime: ''
        });
        const [results, setResults] = useState([]);
        const [history, setHistory] = useState(HISTORY.getHistory());
        const [showFavorites, setShowFavorites] = useState(false);
        const [modal, setModal] = useState(null);
        const [toastMessage, setToastMessage] = useState(null);
        const [preview, setPreview] = useState(null);
        const [isSidebarOpen, setIsSidebarOpen] = useState(false);

        const handleInputChange = (field) => (value) => {
            setInputs(prev => ({...prev, [field]: value}));
        };

        const handleGregorianSubmit = () => {
            if (!inputs.gregorianDate) {
                setModal({message: 'Please select a date.', onClose: () => setModal(null)});
                return;
            }
            try {
                const time = inputs.gregorianTime || '00:00:00';
                const utcDateStr = `${inputs.gregorianDate} ${time}`;
                const allTimes = computeAllTimes('gregorian', utcDateStr);
                const output = [
                    `Input: ${utcDateStr} UTC`,
                    `Gregorian Date: ${allTimes.gregorian}`,
                    `CU-Time (NASA alignment): ${allTimes.cuTimeHuman}`,
                    `Full Numeric (NASA): ${allTimes.cuTimeFull}`,
                    `Exponential (NASA): ${allTimes.cuTimeExp}`,
                    `CU-Time (Converter alignment): ${allTimes.cuTimeConverterHuman}`,
                    `Full Numeric (Converter): ${allTimes.cuTimeConverterFull}`,
                    `Exponential (Converter): ${allTimes.cuTimeConverterExp}`,
                    `Years since Big Bang (NASA): ${allTimes.nasaYears}`,
                    `Cosmic Phase: ${allTimes.phase}`
                ].join('\n');
                setResults(prev => [...prev, {desc: `Gregorian: ${utcDateStr}`, output}]);
                HISTORY.saveConversion(utcDateStr, output, 'Gregorian to Cosmic');
                setHistory(HISTORY.getHistory());
            } catch (e) {
                setResults(prev => [...prev, {desc: 'Error', output: e.message}]);
            }
        };

        const handleNASAToCUSubmit = () => {
            try {
                const nasaYearsStr = inputs.nasaYears.trim();
                if (!nasaYearsStr) {
                    setModal({message: 'Please enter years since the Big Bang.', onClose: () => setModal(null)});
                    return;
                }
                const nasaYears = new Decimal(nasaYearsStr);
                if (nasaYears.isNegative()) {
                    setModal({message: 'Years since Big Bang cannot be negative.', onClose: () => setModal(null)});
                    return;
                }
                const allTimes = computeAllTimes('nasaYears', nasaYears.toString());
                const output = [
                    `Input: ${nasaYearsStr} years since Big Bang (NASA)`,
                    `Gregorian Date: ${allTimes.gregorian}`,
                    `CU-Time (NASA alignment): ${allTimes.cuTimeHuman}`,
                    `Full Numeric (NASA): ${allTimes.cuTimeFull}`,
                    `Exponential (NASA): ${allTimes.cuTimeExp}`,
                    `CU-Time (Converter alignment): ${allTimes.cuTimeConverterHuman}`,
                    `Full Numeric (Converter): ${allTimes.cuTimeConverterFull}`,
                    `Exponential (Converter): ${allTimes.cuTimeConverterExp}`,
                    `Years since Big Bang (NASA): ${allTimes.nasaYears}`,
                    `Cosmic Phase: ${allTimes.phase}`
                ].join('\n');
                setResults(prev => [...prev, {desc: `NASA to CU: ${nasaYearsStr}`, output}]);
                HISTORY.saveConversion(nasaYearsStr, output, 'NASA to CU');
                setHistory(HISTORY.getHistory());
            } catch (e) {
                setModal({message: 'Invalid input. Please enter a valid number.', onClose: () => setModal(null)});
            }
        };

        const handleCUToNASASubmit = () => {
            try {
                const cuTimeStr = inputs.cuTime.trim();
                if (!cuTimeStr) {
                    setModal({message: 'Please enter a CU-Time value.', onClose: () => setModal(null)});
                    return;
                }
                const cuTime = new Decimal(cuTimeStr);
                if (cuTime.isNegative()) {
                    setModal({message: 'CU-Time cannot be negative.', onClose: () => setModal(null)});
                    return;
                }
                const allTimes = computeAllTimes('cuTime', cuTime.toString());
                const output = [
                    `Input: ${cuTimeStr} CU-Time`,
                    `Gregorian Date: ${allTimes.gregorian}`,
                    `CU-Time (NASA alignment): ${allTimes.cuTimeHuman}`,
                    `Full Numeric (NASA): ${allTimes.cuTimeFull}`,
                    `Exponential (NASA): ${allTimes.cuTimeExp}`,
                    `CU-Time (Converter alignment): ${allTimes.cuTimeConverterHuman}`,
                    `Full Numeric (Converter): ${allTimes.cuTimeConverterFull}`,
                    `Exponential (Converter): ${allTimes.cuTimeConverterExp}`,
                    `Years since Big Bang (NASA): ${allTimes.nasaYears}`,
                    `Cosmic Phase: ${allTimes.phase}`
                ].join('\n');
                setResults(prev => [...prev, {desc: `CU to NASA: ${cuTimeStr}`, output}]);
                HISTORY.saveConversion(cuTimeStr, output, 'CU to NASA');
                setHistory(HISTORY.getHistory());
            } catch (e) {
                setModal({message: 'Invalid input. Please enter a valid number.', onClose: () => setModal(null)});
            }
        };

        const handleCalcSubmit = () => {
            try {
                const {calcValue1, calcValue2, calcOperation} = inputs;
                if (!calcValue1.trim() || !calcValue2.trim()) {
                    setModal({message: 'Please enter both CU-Time values.', onClose: () => setModal(null)});
                    return;
                }
                const val1 = new Decimal(calcValue1.trim());
                const val2 = new Decimal(calcValue2.trim());
                const result = performCalculation(val1, val2, calcOperation);
                const allTimes = computeAllTimes('cuTime', result.toString());
                const output = [
                    `Input: ${calcValue1} ${calcOperation} ${calcValue2} CU-Time`,
                    `Result CU-Time (NASA alignment): ${allTimes.cuTimeHuman}`,
                    `Full Numeric (NASA): ${allTimes.cuTimeFull}`,
                    `Exponential (NASA): ${allTimes.cuTimeExp}`,
                    `Result CU-Time (Converter alignment): ${allTimes.cuTimeConverterHuman}`,
                    `Full Numeric (Converter): ${allTimes.cuTimeConverterFull}`,
                    `Exponential (Converter): ${allTimes.cuTimeConverterExp}`,
                    `Corresponding Gregorian Date: ${allTimes.gregorian}`,
                    `Corresponding Years since Big Bang (NASA): ${allTimes.nasaYears}`,
                    `Cosmic Phase: ${allTimes.phase}`
                ].join('\n');
                setResults(prev => [...prev, {
                    desc: `Calculation: ${calcValue1} ${calcOperation} ${calcValue2}`,
                    output
                }]);
                HISTORY.saveConversion(`${calcValue1} ${calcOperation} ${calcValue2}`, output, 'Calculation');
                setHistory(HISTORY.getHistory());
            } catch (e) {
                setModal({message: 'Invalid input. Please enter valid numbers.', onClose: () => setModal(null)});
            }
        };

        const handleCopy = (text) => {
            navigator.clipboard.writeText(text).then(() => {
                setToastMessage({message: 'Copied to clipboard', isError: false});
                setTimeout(() => setToastMessage(null), 3000);
            }).catch(() => {
                setToastMessage({message: 'Failed to copy', isError: true});
                setTimeout(() => setToastMessage(null), 3000);
            });
        };

        const handleDeleteResult = (index) => {
            setResults(prev => prev.filter((_, i) => i !== index));
        };

        const toggleFavorite = (input) => {
            HISTORY.markFavorite(input);
            setHistory(HISTORY.getHistory());
        };

        const parseDate = (dateStr) => {
            // Handle YYYY-MM-DD HH:MM:SS
            if (dateStr.match(/^\d{4}-\d{2}-\d{2} \d{2}:\d{2}:\d{2}$/)) {
                return dateStr;
            }
            // Handle YYYY-MM-DD HH:MM
            else if (dateStr.match(/^\d{4}-\d{2}-\d{2} \d{2}:\d{2}$/)) {
                return `${dateStr}:00`;
            }
            // Handle MM/DD/YYYY HH:MM:SS
            else if (dateStr.match(/^\d{2}\/\d{2}\/\d{4} \d{2}:\d{2}:\d{2}$/)) {
                const [datePart, timePart] = dateStr.split(' ');
                const [month, day, year] = datePart.split('/').map(Number);
                const formattedDate = `${year}-${String(month).padStart(2, '0')}-${String(day).padStart(2, '0')} ${timePart}`;
                return formattedDate;
            }
            // Handle MM/DD/YYYY HH:MM
            else if (dateStr.match(/^\d{2}\/\d{2}\/\d{4} \d{2}:\d{2}$/)) {
                const [datePart, timePart] = dateStr.split(' ');
                const [month, day, year] = datePart.split('/').map(Number);
                const formattedDate = `${year}-${String(month).padStart(2, '0')}-${String(day).padStart(2, '0')} ${timePart}:00`;
                return formattedDate;
            } else {
                throw new Error('Invalid date format in CSV. Use YYYY-MM-DD HH:MM[:SS] or MM/DD/YYYY HH:MM[:SS].');
            }
        };

        const handleCSVUpload = async (e) => {
            try {
                const file = e.target.files[0];
                if (!file) {
                    setModal({message: 'No file selected.', onClose: () => setModal(null)});
                    return;
                }
                Papa.parse(file, {
                    complete: ({data}) => {
                        if (!data[0].join(',').toLowerCase().startsWith('description,datetime,output')) {
                            setModal({
                                message: 'CSV must have headers "Description,DateTime,Output"',
                                onClose: () => setModal(null)
                            });
                            return;
                        }
                        const newResults = [];
                        for (let i = 1; i < data.length; i++) {
                            const [desc, dateTime, output] = data[i];
                            if (!desc || !dateTime) continue;
                            try {
                                let allTimes, inputValue = dateTime.trim();
                                if (desc.startsWith('Gregorian:')) {
                                    const utcDateStr = parseDate(inputValue);
                                    allTimes = computeAllTimes('gregorian', utcDateStr);
                                    const outputText = [
                                        `Input: ${utcDateStr} UTC`,
                                        `Gregorian Date: ${allTimes.gregorian}`,
                                        `CU-Time (NASA alignment): ${allTimes.cuTimeHuman}`,
                                        `Full Numeric (NASA): ${allTimes.cuTimeFull}`,
                                        `Exponential (NASA): ${allTimes.cuTimeExp}`,
                                        `CU-Time (Converter alignment): ${allTimes.cuTimeConverterHuman}`,
                                        `Full Numeric (Converter): ${allTimes.cuTimeConverterFull}`,
                                        `Exponential (Converter): ${allTimes.cuTimeConverterExp}`,
                                        `Years since Big Bang (NASA): ${allTimes.nasaYears}`,
                                        `Cosmic Phase: ${allTimes.phase}`
                                    ].join('\n');
                                    newResults.push({desc, output: outputText});
                                    HISTORY.saveConversion(utcDateStr, outputText, 'Gregorian to Cosmic');
                                } else if (desc.startsWith('NASA to CU:')) {
                                    const nasaYears = new Decimal(inputValue);
                                    if (nasaYears.isNegative()) throw new Error('Years since Big Bang cannot be negative');
                                    allTimes = computeAllTimes('nasaYears', nasaYears.toString());
                                    const outputText = [
                                        `Input: ${inputValue} years since Big Bang (NASA)`,
                                        `Gregorian Date: ${allTimes.gregorian}`,
                                        `CU-Time (NASA alignment): ${allTimes.cuTimeHuman}`,
                                        `Full Numeric (NASA): ${allTimes.cuTimeFull}`,
                                        `Exponential (NASA): ${allTimes.cuTimeExp}`,
                                        `CU-Time (Converter alignment): ${allTimes.cuTimeConverterHuman}`,
                                        `Full Numeric (Converter): ${allTimes.cuTimeConverterFull}`,
                                        `Exponential (Converter): ${allTimes.cuTimeConverterExp}`,
                                        `Years since Big Bang (NASA): ${allTimes.nasaYears}`,
                                        `Cosmic Phase: ${allTimes.phase}`
                                    ].join('\n');
                                    newResults.push({desc, output: outputText});
                                    HISTORY.saveConversion(inputValue, outputText, 'NASA to CU');
                                } else if (desc.startsWith('CU to NASA:')) {
                                    const cuTime = new Decimal(inputValue);
                                    if (cuTime.isNegative()) throw new Error('CU-Time cannot be negative');
                                    allTimes = computeAllTimes('cuTime', cuTime.toString());
                                    const outputText = [
                                        `Input: ${inputValue} CU-Time`,
                                        `Gregorian Date: ${allTimes.gregorian}`,
                                        `CU-Time (NASA alignment): ${allTimes.cuTimeHuman}`,
                                        `Full Numeric (NASA): ${allTimes.cuTimeFull}`,
                                        `Exponential (NASA): ${allTimes.cuTimeExp}`,
                                        `CU-Time (Converter alignment): ${allTimes.cuTimeConverterHuman}`,
                                        `Full Numeric (Converter): ${allTimes.cuTimeConverterFull}`,
                                        `Exponential (Converter): ${allTimes.cuTimeConverterExp}`,
                                        `Years since Big Bang (NASA): ${allTimes.nasaYears}`,
                                        `Cosmic Phase: ${allTimes.phase}`
                                    ].join('\n');
                                    newResults.push({desc, output: outputText});
                                    HISTORY.saveConversion(inputValue, outputText, 'CU to NASA');
                                } else if (desc.startsWith('Calculation:')) {
                                    const calcParts = inputValue.match(/^([\d.]+)\s*([+\-*/])\s*([\d.]+)$/);
                                    if (!calcParts) throw new Error('Invalid calculation format. Use "value1 operator value2" (e.g., "3094206000000 + 13794000000")');
                                    const [, val1, operation, val2] = calcParts;
                                    const result = performCalculation(val1, val2, operation);
                                    allTimes = computeAllTimes('cuTime', result.toString());
                                    const outputText = [
                                        `Input: ${val1} ${operation} ${val2} CU-Time`,
                                        `Result CU-Time (NASA alignment): ${allTimes.cuTimeHuman}`,
                                        `Full Numeric (NASA): ${allTimes.cuTimeFull}`,
                                        `Exponential (NASA): ${allTimes.cuTimeExp}`,
                                        `Result CU-Time (Converter alignment): ${allTimes.cuTimeConverterHuman}`,
                                        `Full Numeric (Converter): ${allTimes.cuTimeConverterFull}`,
                                        `Exponential (Converter): ${allTimes.cuTimeConverterExp}`,
                                        `Corresponding Gregorian Date: ${allTimes.gregorian}`,
                                        `Corresponding Years since Big Bang (NASA): ${allTimes.nasaYears}`,
                                        `Cosmic Phase: ${allTimes.phase}`
                                    ].join('\n');
                                    newResults.push({desc, output: outputText});
                                    HISTORY.saveConversion(`${val1} ${operation} ${val2}`, outputText, 'Calculation');
                                } else {
                                    throw new Error('Invalid description in CSV. Use "Gregorian:", "NASA to CU:", "CU to NASA:", or "Calculation:"');
                                }
                            } catch (error) {
                                newResults.push({desc, output: `Error: ${error.message}`});
                            }
                        }
                        setResults(newResults);
                        setHistory(HISTORY.getHistory());
                    },
                    header: false,
                    skipEmptyLines: true
                });
            } catch (e) {
                setResults(prev => [...prev, {desc: 'Error', output: e.message}]);
            }
        };

        const downloadHistoryCSV = () => {
            const csvContent = history.map(entry => {
                return `"${entry.type.replace(/"/g, '""')}","${entry.input.replace(/"/g, '""')}","${entry.output.replace(/"/g, '""')}","${entry.timestamp}"`;
            }).join('\n');
            const blob = new Blob([`"Type","Input","Output","Timestamp"\n${csvContent}`], {type: 'text/csv'});
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = `conversion_history_${new Date().toISOString().replace(/[:.]/g, '-')}.csv`;
            a.click();
            URL.revokeObjectURL(url);
        };

        const debouncedCompute = _.debounce((inputType, value) => {
            try {
                const allTimes = computeAllTimes(inputType, value);
                setPreview(allTimes);
            } catch (e) {
                setPreview({error: e.message});
            }
        }, 500);

        useEffect(() => {
            if (tab === 'gregorian' && inputs.gregorianDate) {
                const time = inputs.gregorianTime || '00:00:00';
                const utcDateStr = `${inputs.gregorianDate} ${time}`;
                debouncedCompute('gregorian', utcDateStr);
            } else {
                setPreview(null);
            }
        }, [inputs.gregorianDate, inputs.gregorianTime, tab]);

        return (
            <div className="flex">
                <button
                    className="md:hidden p-4 text-white"
                    onClick={() => setIsSidebarOpen(!isSidebarOpen)}
                    aria-label="Toggle sidebar"
                >
                    <i className="fas fa-bars"></i>
                </button>
                <aside className={`w-64 bg-gray-800 p-4 fixed h-full ${isSidebarOpen ? 'block' : 'hidden'} md:block`}>
                    <h3 className="text-xl font-semibold text-white mb-4">Navigation</h3>
                    <ul className="space-y-4">
                        <li>
                            <button
                                onClick={() => setTab('gregorian')}
                                className={`w-full text-left px-4 py-2 text-white rounded ${tab === 'gregorian' ? 'bg-blue-600' : 'hover:bg-blue-700'} cosmic-button`}
                            >
                                Gregorian to Cosmic
                            </button>
                        </li>
                        <li>
                            <button
                                onClick={() => setTab('nasaToCU')}
                                className={`w-full text-left px-4 py-2 text-white rounded ${tab === 'nasaToCU' ? 'bg-blue-600' : 'hover:bg-blue-700'} cosmic-button`}
                            >
                                NASA to CU-Time
                            </button>
                        </li>
                        <li>
                            <button
                                onClick={() => setTab('cuToNASA')}
                                className={`w-full text-left px-4 py-2 text-white rounded ${tab === 'cuToNASA' ? 'bg-blue-600' : 'hover:bg-blue-700'} cosmic-button`}
                            >
                                CU-Time to NASA
                            </button>
                        </li>
                        <li>
                            <button
                                onClick={() => setTab('calculator')}
                                className={`w-full text-left px-4 py-2 text-white rounded ${tab === 'calculator' ? 'bg-blue-600' : 'hover:bg-blue-700'} cosmic-button`}
                            >
                                Calculator
                            </button>
                        </li>
                        <li>
                            <button
                                onClick={() => setTab('cosmicTimeResearch')}
                                className={`w-full text-left px-4 py-2 text-white rounded ${tab === 'cosmicTimeResearch' ? 'bg-blue-600' : 'hover:bg-blue-700'} cosmic-button`}
                            >
                                Cosmic Time Alignment Research
                            </button>
                        </li>
                        <li>
                            <a
                                href="./cu_time_converter_stable_v3_0_0.html"
                                className="w-full text-left px-4 py-2 text-white rounded hover:bg-blue-700 cosmic-button"
                            >
                                CU Time Converter
                            </a>
                        </li>
                    </ul>
                </aside>
                <div className="flex-1 md:ml-64 p-6">
                    <header className="mb-6 p-6 gradient-header border border-indigo-800/30 rounded-lg shadow-lg">
                        <h1 className="text-4xl font-extrabold text-white tracking-tight">
                            NASA Cosmic Time Converter
                        </h1>
                    </header>
                    <main>
                        {tab === 'gregorian' && (
                            <section className="mb-8 bg-gray-800 rounded-lg shadow-md p-6 card">
                                <h2 className="text-2xl font-semibold text-white mb-4">Gregorian to Cosmic Time</h2>
                                <div className="grid grid-cols-1 gap-4">
                                    <div>
                                        <label className="block text-gray-300 mb-1" htmlFor="gregorianDate">
                                            <i className="fas fa-calendar mr-2"></i>Date (YYYY-MM-DD)
                                        </label>
                                        <input
                                            type="date"
                                            id="gregorianDate"
                                            value={inputs.gregorianDate}
                                            onChange={(e) => handleInputChange('gregorianDate')(e.target.value)}
                                            className="w-full px-3 py-2 border rounded bg-gray-700 text-white"
                                            aria-label="Select date"
                                        />
                                    </div>
                                    <div>
                                        <label className="block text-gray-300 mb-1" htmlFor="gregorianTime">
                                            <i className="fas fa-clock mr-2"></i>Time (HH:MM:SS)
                                        </label>
                                        <input
                                            type="time"
                                            id="gregorianTime"
                                            value={inputs.gregorianTime}
                                            onChange={(e) => handleInputChange('gregorianTime')(e.target.value)}
                                            className="w-full px-3 py-2 border rounded bg-gray-700 text-white"
                                            aria-label="Select time"
                                        />
                                    </div>
                                    {preview && !preview.error && (
                                        <div className="mt-4 p-4 bg-gray-700 rounded">
                                            <p>Preview:</p>
                                            <p>CU-Time (NASA alignment): {preview.cuTimeHuman}</p>
                                            <p>CU-Time (Converter alignment): {preview.cuTimeConverterHuman}</p>
                                            <p>NASA Years: {preview.nasaYears}</p>
                                            <p>Phase: {preview.phase}</p>
                                        </div>
                                    )}
                                    {preview && preview.error && (
                                        <div className="mt-4 p-4 bg-red-700 rounded">
                                            <p>Error: {preview.error}</p>
                                        </div>
                                    )}
                                    <div>
                                        <button
                                            onClick={handleGregorianSubmit}
                                            className="w-full md:w-auto px-6 py-2 cosmic-button"
                                            aria-label="Convert Gregorian date to Cosmic Time"
                                        >
                                            <i className="fas fa-rocket mr-2"></i>Convert
                                        </button>
                                    </div>
                                </div>
                            </section>
                        )}

                        {tab === 'nasaToCU' && (
                            <section className="mb-8 bg-gray-800 rounded-lg shadow-md p-6 card">
                                <h2 className="text-2xl font-semibold text-white mb-4">NASA to CU-Time Conversion</h2>
                                <div className="grid grid-cols-1 gap-4">
                                    <div>
                                        <label className="block text-gray-300 mb-1" htmlFor="nasaYears">
                                            <i className="fas fa-star mr-2"></i>Years since Big Bang (NASA)
                                        </label>
                                        <input
                                            type="text"
                                            id="nasaYears"
                                            value={inputs.nasaYears}
                                            onChange={(e) => handleInputChange('nasaYears')(e.target.value)}
                                            onKeyPress={(e) => e.key === 'Enter' && handleNASAToCUSubmit()}
                                            className="w-full px-3 py-2 border rounded bg-gray-700 text-white"
                                            placeholder="e.g., 13794000000"
                                            aria-label="Enter years since Big Bang"
                                        />
                                    </div>
                                    <div>
                                        <button
                                            onClick={handleNASAToCUSubmit}
                                            className="w-full md:w-auto px-6 py-2 cosmic-button"
                                            aria-label="Convert NASA years to CU-Time"
                                        >
                                            <i className="fas fa-rocket mr-2"></i>Convert
                                        </button>
                                    </div>
                                </div>
                            </section>
                        )}

                        {tab === 'cuToNASA' && (
                            <section className="mb-8 bg-gray-800 rounded-lg shadow-md p-6 card">
                                <h2 className="text-2xl font-semibold text-white mb-4">CU-Time to NASA Time
                                    Conversion</h2>
                                <div className="grid grid-cols-1 gap-4">
                                    <div>
                                        <label className="block text-gray-300 mb-1" htmlFor="cuTime">
                                            <i className="fas fa-star mr-2"></i>CU-Time
                                        </label>
                                        <input
                                            type="text"
                                            id="cuTime"
                                            value={inputs.cuTime}
                                            onChange={(e) => handleInputChange('cuTime')(e.target.value)}
                                            onKeyPress={(e) => e.key === 'Enter' && handleCUToNASASubmit()}
                                            className="w-full px-3 py-2 border rounded bg-gray-700 text-white"
                                            placeholder="e.g., 3094206000000"
                                            aria-label="Enter CU-Time value"
                                        />
                                    </div>
                                    <div>
                                        <button
                                            onClick={handleCUToNASASubmit}
                                            className="w-full md:w-auto px-6 py-2 cosmic-button"
                                            aria-label="Convert CU-Time to NASA years"
                                        >
                                            <i className="fas fa-rocket mr-2"></i>Convert
                                        </button>
                                    </div>
                                </div>
                            </section>
                        )}

                        {tab === 'calculator' && (
                            <section className="mb-8 bg-gray-800 rounded-lg shadow-md p-6 card">
                                <h2 className="text-2xl font-semibold text-white mb-4">CU-Time Calculator</h2>
                                <div className="grid grid-cols-1 gap-4">
                                    <div>
                                        <label className="block text-gray-300 mb-1" htmlFor="calcValue1">
                                            <i className="fas fa-star mr-2"></i>First CU-Time Value
                                        </label>
                                        <input
                                            type="text"
                                            id="calcValue1"
                                            value={inputs.calcValue1}
                                            onChange={(e) => handleInputChange('calcValue1')(e.target.value)}
                                            onKeyPress={(e) => e.key === 'Enter' && handleCalcSubmit()}
                                            className="w-full px-3 py-2 border rounded bg-gray-700 text-white"
                                            placeholder="e.g., 3094206000000"
                                            aria-label="Enter first CU-Time value"
                                        />
                                    </div>
                                    <div>
                                        <label className="block text-gray-300 mb-1" htmlFor="calcOperation">
                                            <i className="fas fa-calculator mr-2"></i>Operation
                                        </label>
                                        <select
                                            id="calcOperation"
                                            value={inputs.calcOperation}
                                            onChange={(e) => handleInputChange('calcOperation')(e.target.value)}
                                            className="w-full px-3 py-2 border rounded bg-gray-700 text-white"
                                            aria-label="Select calculation operation"
                                        >
                                            <option value="+">Addition (+)</option>
                                            <option value="-">Subtraction (-)</option>
                                            <option value="*">Multiplication (*)</option>
                                            <option value="/">Division (/)</option>
                                        </select>
                                    </div>
                                    <div>
                                        <label className="block text-gray-300 mb-1" htmlFor="calcValue2">
                                            <i className="fas fa-star mr-2"></i>Second CU-Time Value
                                        </label>
                                        <input
                                            type="text"
                                            id="calcValue2"
                                            value={inputs.calcValue2}
                                            onChange={(e) => handleInputChange('calcValue2')(e.target.value)}
                                            onKeyPress={(e) => e.key === 'Enter' && handleCalcSubmit()}
                                            className="w-full px-3 py-2 border rounded bg-gray-700 text-white"
                                            placeholder="e.g., 0.000739754795723161506672964"
                                            aria-label="Enter second CU-Time value"
                                        />
                                    </div>
                                    <div>
                                        <button
                                            onClick={handleCalcSubmit}
                                            className="w-full md:w-auto px-6 py-2 cosmic-button"
                                            aria-label="Perform calculation"
                                        >
                                            <i className="fas fa-calculator mr-2"></i>Compute
                                        </button>
                                    </div>
                                </div>
                            </section>
                        )}

                        {tab === 'cosmicTimeResearch' && (
                            <section className="mb-8 bg-gray-800 rounded-lg shadow-md p-6 card cosmic-breath-section">
                                <h2 className="text-2xl font-semibold text-white mb-4">Cosmic Time Alignment
                                    Research</h2>
                                <div className="markdown-content"
                                     dangerouslySetInnerHTML={{__html: marked.parse(RESEARCH_MARKDOWN)}}/>
                            </section>
                        )}

                        <section className="mb-8 bg-gray-800 rounded-lg shadow-md p-6 card">
                            <h2 className="text-2xl font-semibold text-white mb-4"><i
                                className="fas fa-upload mr-2"></i>Upload CSV</h2>
                            <input
                                type="file"
                                accept=".csv"
                                onChange={handleCSVUpload}
                                className="w-full px-3 py-2 border rounded bg-gray-700 text-white"
                                aria-label="Upload CSV file"
                            />
                            <p className="text-sm text-gray-300 mt-2">
                                CSV must have headers "Description,DateTime,Output". Examples: "Gregorian: 2025-05-31
                                00:00:00", "Gregorian: 2025-06-01 12:00", "NASA to CU: 13794000000", "CU to NASA:
                                3094206000000", "Calculation: 3094206000000 + 13794000000"
                            </p>
                        </section>

                        <div className="flex justify-between mb-6">
                            <button
                                onClick={() => downloadCSV(results)}
                                className="px-4 py-2 bg-green-600 text-white rounded hover:bg-green-700 cosmic-button"
                                aria-label="Download results as CSV"
                            >
                                <i className="fas fa-download mr-2"></i>Download Results
                            </button>
                            <button
                                onClick={() => setResults([])}
                                className="px-4 py-2 bg-red-600 text-white rounded hover:bg-red-700 cosmic-button"
                                aria-label="Clear all results"
                            >
                                <i className="fas fa-trash mr-2"></i>Clear Results
                            </button>
                        </div>

                        {results.length > 0 && (
                            <section className="mb-8">
                                <h2 className="text-2xl font-semibold text-white mb-4">Results</h2>
                                {results.map((result, idx) => (
                                    <div key={idx} className="bg-gray-900 rounded-lg shadow-md p-6 mb-4 relative card">
                                        <div className="absolute top-2 right-2 flex space-x-2">
                                            <button
                                                onClick={() => handleCopy(result.output)}
                                                className="bg-blue-600 text-white rounded hover:bg-blue-700 transition duration-300 icon-button"
                                                title="Copy to clipboard"
                                                aria-label="Copy result to clipboard"
                                            >
                                                <i className="fas fa-copy"></i>
                                            </button>
                                            <button
                                                onClick={() => handleDeleteResult(idx)}
                                                className="bg-red-600 text-white rounded hover:bg-red-700 transition duration-300 icon-button"
                                                title="Delete result"
                                                aria-label="Delete result"
                                            >
                                                <i className="fas fa-trash"></i>
                                            </button>
                                        </div>
                                        <p className="text-sm text-gray-300 mb-2">{result.desc}</p>
                                        <textarea
                                            value={result.output}
                                            readOnly
                                            className="w-full px-3 py-2 border rounded bg-gray-800 text-white"
                                            rows="10"
                                            aria-label="Conversion result"
                                        />
                                    </div>
                                ))}
                            </section>
                        )}

                        <section className="mb-8">
                            <div className="flex justify-between mb-4">
                                <h2 className="text-2xl font-semibold text-white">History</h2>
                                <div>
                                    <button
                                        onClick={downloadHistoryCSV}
                                        className="px-4 py-2 bg-green-600 text-white rounded hover:bg-green-700 cosmic-button mr-4"
                                        aria-label="Download history as CSV"
                                    >
                                        <i className="fas fa-download mr-2"></i>Download History
                                    </button>
                                    <button
                                        onClick={() => setShowFavorites(!showFavorites)}
                                        className="text-blue-400 hover:text-blue-500 transition duration-300"
                                        aria-label={showFavorites ? "Show all history" : "Show favorite history"}
                                    >
                                        {showFavorites ? 'Show All' : 'Show Favorites'}
                                    </button>
                                </div>
                            </div>
                            {(showFavorites ? HISTORY.getFavorites() : history).map((entry, idx) => (
                                <div key={idx}
                                     className="bg-gray-800 rounded-lg shadow-md p-4 mb-2 flex justify-between items-center card">
                                    <div>
                                        <p className="text-sm text-gray-300">{entry.input}</p>
                                        <p className="text-sm text-gray-300">{entry.output}</p>
                                        <p className="text-xs text-gray-500">{entry.type} | {new Date(entry.timestamp).toLocaleString()}</p>
                                    </div>
                                    <button
                                        onClick={() => toggleFavorite(entry.input)}
                                        className="text-blue-400 hover:text-yellow-500 transition duration-300"
                                        aria-label={entry.favorite ? "Remove from favorites" : "Add to favorites"}
                                    >
                                        {entry.favorite ? '★' : '☆'}
                                    </button>
                                </div>
                            ))}
                        </section>
                    </main>
                    <footer
                        className="mt-8 p-6 gradient-header border border-indigo-800/30 rounded-lg shadow-lg text-center text-gray-200">
                        <p className="text-sm font-light">
                            © 2025 Cosmic Universalism Computational Intelligence Initiative
                        </p>
                        <p className="text-sm font-light mt-2">
                            Conceptual content licensed under <a
                            href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank"
                            rel="noopener noreferrer" className="underline hover:text-white transition-colors">CC
                            BY-NC-SA 4.0</a>.
                            Source code licensed under <a
                            href="https://github.com/willmaddock/CosmicUniversalismStatement/blob/main/LICENSE"
                            target="_blank" rel="noopener noreferrer"
                            className="underline hover:text-white transition-colors">MIT License</a>.
                        </p>
                    </footer>
                </div>
                {modal && <Modal message={modal.message} onClose={modal.onClose}/>}
                {toastMessage && (
                    <div
                        className={`fixed bottom-4 right-4 p-4 rounded shadow-lg transition-opacity duration-300 ${toastMessage.isError ? 'bg-red-500' : 'bg-green-500'} text-white`}>
                        {toastMessage.message}
                    </div>
                )}
            </div>
        );
    }

    const root = ReactDOM.createRoot(document.getElementById('root'));
    root.render(<App/>);
</script>
</body>
</html>